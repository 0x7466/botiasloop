#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative "../lib/botiasloop"

if ARGV[0] == "gateway"
  # Gateway mode - start Telegram bot
  config = Botiasloop::Config.load
  telegram = Botiasloop::Channels::Telegram.new(config)
  telegram.start
elsif ARGV.empty?
  # Interactive mode
  agent = Botiasloop::Agent.new
  agent.interactive
else
  # One-shot mode
  agent = Botiasloop::Agent.new
  puts agent.chat(ARGV.join(" "))
end
